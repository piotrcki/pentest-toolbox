FROM kalilinux/kali

ADD --chown=root:root sources.list /etc/apt/
RUN chmod 0644 /etc/apt/sources.list

RUN DEBIAN_FRONTEND=noninteractive apt-get update -y
RUN DEBIAN_FRONTEND=noninteractive apt-get install apt-utils -y
RUN DEBIAN_FRONTEND=noninteractive apt-get dist-upgrade -y

RUN echo "wireshark-common wireshark-common/install-setuid boolean false" \
    | debconf-set-selections

RUN DEBIAN_FRONTEND=noninteractive apt-get install \
    afl++ \
    aircrack-ng \
    awscli \
    bash-completion \
    binwalk \
    bloodhound \
    build-essential \
    bwm-ng \
    dirb \
    dnsmap \
    dsniff \
    dnsutils \
    ettercap-text-only \
    geoip-bin \
    git \
    hashcat \
    hping3 \
    htop \
    httpie \
    hydra \
    iproute2 \
    iputils-ping \
    john \
    man-db \
    masscan \
    metasploit-framework \
    miscfiles \
    mitmproxy \
    most \
    nikto \
    nmap \
    openssl \
    proxychains4 \
    python \
    python3 \
    python3-pip \
    radare2 \
    scapy \
    screen \
    socat \
    sqlmap \
    sslscan \
    stunnel4 \
    subversion \
    termshark \
    testdisk \
    theharvester \
    tshark \
    vim \
    whois \
    wpscan \
    xz-utils \
    -y

RUN cd /usr/share/ && git clone https://github.com/SpiderLabs/Responder/ 

RUN cd /tmp/ && git clone https://github.com/SecureAuthCorp/impacket \
    && cd impacket && pip install . && cd .. && rm -r impacket

ADD --chown=root:root piotrcki-wordlist-top10m.txt.xz /usr/share/dict/
RUN unxz /usr/share/dict/piotrcki-wordlist-top10m.txt.xz
RUN chmod 0444 /usr/share/dict/piotrcki-wordlist-top10m.txt

RUN DEBIAN_FRONTEND=noninteractive apt-get clean -y

ENV PAGER='most'
ENV EDITOR='vim'

